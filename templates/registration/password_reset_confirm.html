{% extends 'base.html' %}

{% block page_title %}Nouveau mot de passe{% endblock %}
{% block navbar_title %}Nouveau mot de passe{% endblock %}

{% block container %}

    <div class="container px-3">

        {% if validlink %}

            <form class="mt-3" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="id_new_password1">Mot de passe</label>
                    <input id="id_new_password1" type="password" name="new_password1" class="form-control" aria-describedby="emailHelp">
                    <small id="emailHelp" class="form-text text-muted">Minimum 8 caractères, pas que numérique</small>
                </div>
                <div class="form-group">
                    <label for="id_new_password2">Confirmation du mot de passe</label>
                    <input id="id_new_password2" type="password" name="new_password2" class="form-control">
                </div>
                <button class="btn btn-lg btn-outline-success" type="submit">Envoyer</button>
            </form>

        {% else %}
            <p class="mt-3">
                Le lien de réinitialisation du mot de passe n'est plus valide, il a peut-être déjà été utilisé.
                Tu dois faire une nouvelle demande de mot de passe.
            </p>

            <div class="text-center mt-4" >
                <form action="{{ request.scheme }}://{{ request.get_host }}{% url 'password_reset' %}">
                    <button type="submit" class="btn btn-outline-success">Mot de passe oublié</button>
                </form>
            </div>
        {% endif %}

    </div>
{% endblock %}